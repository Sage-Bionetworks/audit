-- Count of public files
SELECT
    COUNT(DISTINCT ID)
FROM
    VIEW_PUBLIC_NODES
WHERE
    TYPE = 16;


-- Count of public files created by non-sage users
SELECT
    COUNT(DISTINCT NODES.ID)
FROM
    VIEW_PUBLIC_NODES NODES,
    VIEW_NON_SAGE_USERS USERS
WHERE
    NODES.CREATED_BY = USERS.PRINCIPAL_ID AND
    NODES.TYPE = 16;


-- Count of non-public files
SELECT
    COUNT(DISTINCT ID)
FROM
    JDONODE
WHERE
    ID NOT IN (SELECT ID FROM VIEW_PUBLIC_NODES) AND
    NODE_TYPE = 16 AND        -- Type is file
    BENEFACTOR_ID <> 1681355; -- Not in trash can


-- Count of non-public files created by non-sage users
SELECT
    COUNT(DISTINCT NODES.ID)
FROM
    JDONODE NODES,
    VIEW_NON_SAGE_USERS USERS
WHERE
    NODES.ID NOT IN (SELECT ID FROM VIEW_PUBLIC_NODES) AND
    NODES.CREATED_BY = USERS.PRINCIPAL_ID AND
    NODE_TYPE = 16 AND        -- Type is file
    BENEFACTOR_ID <> 1681355; -- Not in trash can

-- Since last audit ---

-- Count of public files
SELECT
    COUNT(DISTINCT ID)
FROM
    VIEW_PUBLIC_NODES
WHERE
    TYPE = 16 AND
    CREATED_ON > 1383289200000 AND -- 2013-11-01 00:00:00 PST
    CREATED_ON < 1391241600000;    -- 2014-02-01 00:00:00 PST;


-- Count of public files created by non-sage users
SELECT
    COUNT(DISTINCT NODES.ID)
FROM
    VIEW_PUBLIC_NODES NODES,
    VIEW_NON_SAGE_USERS USERS
WHERE
    NODES.CREATED_BY = USERS.PRINCIPAL_ID AND
    NODES.TYPE = 16 AND
    NODES.CREATED_ON > 1383289200000 AND -- 2013-11-01 00:00:00 PST
    NODES.CREATED_ON < 1391241600000;    -- 2014-02-01 00:00:00 PST;


-- Count of non-public files
SELECT
    COUNT(DISTINCT ID)
FROM
    JDONODE
WHERE
    ID NOT IN (SELECT ID FROM VIEW_PUBLIC_NODES) AND
    NODE_TYPE = 16 AND           -- Type is file
    BENEFACTOR_ID <> 1681355 AND -- Not in trash can
    CREATED_ON > 1383289200000 AND -- 2013-11-01 00:00:00 PST
    CREATED_ON < 1391241600000;    -- 2014-02-01 00:00:00 PST;


-- Count of non-public files created by non-sage users
SELECT
    COUNT(DISTINCT NODES.ID)
FROM
    JDONODE NODES,
    VIEW_NON_SAGE_USERS USERS
WHERE
    NODES.ID NOT IN (SELECT ID FROM VIEW_PUBLIC_NODES) AND
    NODES.CREATED_BY = USERS.PRINCIPAL_ID AND
    NODE_TYPE = 16 AND           -- Type is file
    BENEFACTOR_ID <> 1681355 AND -- Not in trash can
    NODES.CREATED_ON > 1383289200000 AND -- 2013-11-01 00:00:00 PST
    NODES.CREATED_ON < 1391241600000;    -- 2014-02-01 00:00:00 PST;
